2023-09-12 02:11:47,790 ERROR 7372 nodejs.ClusterClientNoResponseError: client no response in 243073ms exceeding maxIdleTime 60000ms, maybe the connection is close on other side.
    at Timeout._onTimeout (D:\work\code\owner\node\eggSys\node_modules\_cluster-client@3.5.0@cluster-client\lib\leader.js:79:25)
    at listOnTimeout (internal/timers.js:557:17)
    at processTimers (internal/timers.js:500:7)
name: "ClusterClientNoResponseError"
pid: 7372
hostname: LAILINXIANG-L14

2023-09-12 03:39:23,704 ERROR 7372 nodejs.ClusterClientNoResponseError: client no response in 5255789ms exceeding maxIdleTime 60000ms, maybe the connection is close on other side.
    at Timeout._onTimeout (D:\work\code\owner\node\eggSys\node_modules\_cluster-client@3.5.0@cluster-client\lib\leader.js:79:25)
    at listOnTimeout (internal/timers.js:557:17)
    at processTimers (internal/timers.js:500:7)
name: "ClusterClientNoResponseError"
pid: 7372
hostname: LAILINXIANG-L14

2023-09-12 04:46:23,995 ERROR 7372 nodejs.ClusterClientNoResponseError: client no response in 4020043ms exceeding maxIdleTime 60000ms, maybe the connection is close on other side.
    at Timeout._onTimeout (D:\work\code\owner\node\eggSys\node_modules\_cluster-client@3.5.0@cluster-client\lib\leader.js:79:25)
    at listOnTimeout (internal/timers.js:557:17)
    at processTimers (internal/timers.js:500:7)
name: "ClusterClientNoResponseError"
pid: 7372
hostname: LAILINXIANG-L14

2023-09-12 05:50:24,427 ERROR 7372 nodejs.ClusterClientNoResponseError: client no response in 3840281ms exceeding maxIdleTime 60000ms, maybe the connection is close on other side.
    at Timeout._onTimeout (D:\work\code\owner\node\eggSys\node_modules\_cluster-client@3.5.0@cluster-client\lib\leader.js:79:25)
    at listOnTimeout (internal/timers.js:557:17)
    at processTimers (internal/timers.js:500:7)
name: "ClusterClientNoResponseError"
pid: 7372
hostname: LAILINXIANG-L14

2023-09-12 07:07:24,345 ERROR 7372 nodejs.ClusterClientNoResponseError: client no response in 4619755ms exceeding maxIdleTime 60000ms, maybe the connection is close on other side.
    at Timeout._onTimeout (D:\work\code\owner\node\eggSys\node_modules\_cluster-client@3.5.0@cluster-client\lib\leader.js:79:25)
    at listOnTimeout (internal/timers.js:557:17)
    at processTimers (internal/timers.js:500:7)
name: "ClusterClientNoResponseError"
pid: 7372
hostname: LAILINXIANG-L14

2023-09-12 07:55:24,989 ERROR 7372 nodejs.ClusterClientNoResponseError: client no response in 2840336ms exceeding maxIdleTime 60000ms, maybe the connection is close on other side.
    at Timeout._onTimeout (D:\work\code\owner\node\eggSys\node_modules\_cluster-client@3.5.0@cluster-client\lib\leader.js:79:25)
    at listOnTimeout (internal/timers.js:557:17)
    at processTimers (internal/timers.js:500:7)
name: "ClusterClientNoResponseError"
pid: 7372
hostname: LAILINXIANG-L14

2023-09-12 09:07:25,345 ERROR 7372 nodejs.ClusterClientNoResponseError: client no response in 656551ms exceeding maxIdleTime 60000ms, maybe the connection is close on other side.
    at Timeout._onTimeout (D:\work\code\owner\node\eggSys\node_modules\_cluster-client@3.5.0@cluster-client\lib\leader.js:79:25)
    at listOnTimeout (internal/timers.js:557:17)
    at processTimers (internal/timers.js:500:7)
name: "ClusterClientNoResponseError"
pid: 7372
hostname: LAILINXIANG-L14

2023-09-12 10:44:18,467 ERROR 7372 nodejs.unhandledExceptionError: read ECONNRESET
    at TCP.onStreamRead (internal/stream_base_commons.js:209:20)
errno: -4077
code: "ECONNRESET"
syscall: "read"
name: "unhandledExceptionError"
pid: 7372
hostname: LAILINXIANG-L14

2023-09-12 10:44:18,843 ERROR 15728 [-/127.0.0.1/-/10ms POST /file] nodejs.ReferenceError: file is not defined
    at HomeController.uploadFile (D:\work\code\owner\node\eggSys\app\controller\home.js:22:70)
    at processTicksAndRejections (internal/process/task_queues.js:95:5)
    at async D:\work\code\owner\node\eggSys\node_modules\_egg-development@2.7.0@egg-development\app\middleware\egg_loader_trace.js:9:50
    at async xframe (D:\work\code\owner\node\eggSys\node_modules\_egg-security@3.1.0@egg-security\lib\middlewares\xframe.js:7:5)
    at async xssProtection (D:\work\code\owner\node\eggSys\node_modules\_egg-security@3.1.0@egg-security\lib\middlewares\xssProtection.js:7:5)
    at async nosniff (D:\work\code\owner\node\eggSys\node_modules\_egg-security@3.1.0@egg-security\lib\middlewares\nosniff.js:8:5)
    at async noopen (D:\work\code\owner\node\eggSys\node_modules\_egg-security@3.1.0@egg-security\lib\middlewares\noopen.js:8:5)
    at async session (D:\work\code\owner\node\eggSys\node_modules\_koa-session@6.4.0@koa-session\index.js:41:7)
    at async bodyParser (D:\work\code\owner\node\eggSys\node_modules\_koa-bodyparser@4.4.1@koa-bodyparser\index.js:78:5)
    at async D:\work\code\owner\node\eggSys\node_modules\_koa-static-cache@5.1.4@koa-static-cache\index.js:39:63

pid: 15728
hostname: LAILINXIANG-L14

2023-09-12 10:45:50,917 ERROR 18372 [-/127.0.0.1/-/10ms POST /file] nodejs.TypeError: The "chunk" argument must be of type string or an instance of Buffer or Uint8Array. Received an instance of FileStream
    at new NodeError (internal/errors.js:322:7)
    at WriteStream.Writable.write (internal/streams/writable.js:285:13)
    at HomeController.uploadFile (D:\work\code\owner\node\eggSys\app\controller\home.js:24:5)
    at processTicksAndRejections (internal/process/task_queues.js:95:5)
    at async D:\work\code\owner\node\eggSys\node_modules\_egg-development@2.7.0@egg-development\app\middleware\egg_loader_trace.js:9:50
    at async xframe (D:\work\code\owner\node\eggSys\node_modules\_egg-security@3.1.0@egg-security\lib\middlewares\xframe.js:7:5)
    at async xssProtection (D:\work\code\owner\node\eggSys\node_modules\_egg-security@3.1.0@egg-security\lib\middlewares\xssProtection.js:7:5)
    at async nosniff (D:\work\code\owner\node\eggSys\node_modules\_egg-security@3.1.0@egg-security\lib\middlewares\nosniff.js:8:5)
    at async noopen (D:\work\code\owner\node\eggSys\node_modules\_egg-security@3.1.0@egg-security\lib\middlewares\noopen.js:8:5)
    at async session (D:\work\code\owner\node\eggSys\node_modules\_koa-session@6.4.0@koa-session\index.js:41:7)
code: "ERR_INVALID_ARG_TYPE"
pid: 18372
hostname: LAILINXIANG-L14

2023-09-12 11:37:02,502 ERROR 18176 [-/127.0.0.1/-/11ms POST /file] nodejs.TypeError: stream.out is not a function
    at HomeController.uploadFile (D:\work\code\owner\node\eggSys\app\controller\home.js:28:8)
    at processTicksAndRejections (internal/process/task_queues.js:95:5)
    at async D:\work\code\owner\node\eggSys\node_modules\_egg-development@2.7.0@egg-development\app\middleware\egg_loader_trace.js:9:50
    at async xframe (D:\work\code\owner\node\eggSys\node_modules\_egg-security@3.1.0@egg-security\lib\middlewares\xframe.js:7:5)
    at async xssProtection (D:\work\code\owner\node\eggSys\node_modules\_egg-security@3.1.0@egg-security\lib\middlewares\xssProtection.js:7:5)
    at async nosniff (D:\work\code\owner\node\eggSys\node_modules\_egg-security@3.1.0@egg-security\lib\middlewares\nosniff.js:8:5)
    at async noopen (D:\work\code\owner\node\eggSys\node_modules\_egg-security@3.1.0@egg-security\lib\middlewares\noopen.js:8:5)
    at async session (D:\work\code\owner\node\eggSys\node_modules\_koa-session@6.4.0@koa-session\index.js:41:7)
    at async bodyParser (D:\work\code\owner\node\eggSys\node_modules\_koa-bodyparser@4.4.1@koa-bodyparser\index.js:78:5)
    at async D:\work\code\owner\node\eggSys\node_modules\_koa-static-cache@5.1.4@koa-static-cache\index.js:39:63

pid: 18176
hostname: LAILINXIANG-L14

2023-09-12 14:00:49,259 ERROR 12236 [-/127.0.0.1/-/9ms POST /sql] nodejs.ER_BAD_FIELD_ERRORError: ER_BAD_FIELD_ERROR: Unknown column 'departments_id' in 'where clause'
    at Query.Sequence._packetToError (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\sequences\Sequence.js:47:14)
    at Query.ErrorPacket (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\sequences\Query.js:79:18)
    at Protocol._parsePacket (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\Protocol.js:291:23)
    at Parser._parsePacket (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\Parser.js:433:10)
    at Parser.write (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\Parser.js:43:10)
    at Protocol.write (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\Protocol.js:38:16)
    at Socket.<anonymous> (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\Connection.js:88:28)
    at Socket.<anonymous> (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\Connection.js:526:10)
    at Socket.emit (events.js:400:28)
    at addChunk (internal/streams/readable.js:293:12)
    --------------------
    at Pool.query (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\Pool.js:199:23)
    at internal/util.js:340:30
    at new Promise (<anonymous>)
    at Pool.query (internal/util.js:339:12)
    at RDSClient._query (D:\work\code\owner\node\eggSys\node_modules\_ali-rds@5.1.2@ali-rds\lib\client.js:33:33)
    at RDSClient.query (D:\work\code\owner\node\eggSys\node_modules\_ali-rds@5.1.2@ali-rds\lib\operator.js:62:31)
    at RDSClient.select (D:\work\code\owner\node\eggSys\node_modules\_ali-rds@5.1.2@ali-rds\lib\operator.js:120:27)
    at RDSClient.get (D:\work\code\owner\node\eggSys\node_modules\_ali-rds@5.1.2@ali-rds\lib\operator.js:127:33)
    at HomeService.operateSql (D:\work\code\owner\node\eggSys\app\service\home.js:12:39)
    at HomeController.sqlApi (D:\work\code\owner\node\eggSys\app\controller\home.js:51:41)
    sql: SELECT * FROM `departments` WHERE `departments_id` = 10 LIMIT 0, 1
code: "ER_BAD_FIELD_ERROR"
errno: 1054
sqlMessage: "Unknown column 'departments_id' in 'where clause'"
sqlState: "42S22"
index: 0
sql: "SELECT * FROM `departments` WHERE `departments_id` = 10 LIMIT 0, 1"
name: "ER_BAD_FIELD_ERRORError"
pid: 12236
hostname: LAILINXIANG-L14

2023-09-12 14:10:17,741 ERROR 19036 [-/127.0.0.1/-/5ms POST /sql] nodejs.Error: Can not auto detect update condition, please set option.where, or make sure obj.id exists
    at RDSClient.update (D:\work\code\owner\node\eggSys\node_modules\_ali-rds@5.1.2@ali-rds\lib\operator.js:168:23)
    at HomeService.operateSql (D:\work\code\owner\node\eggSys\app\service\home.js:22:41)
    at HomeController.sqlApi (D:\work\code\owner\node\eggSys\app\controller\home.js:51:41)
    at Object.callFn (D:\work\code\owner\node\eggSys\node_modules\_egg-core@5.3.1@egg-core\lib\utils\index.js:44:21)
    at Object.classControllerMiddleware (D:\work\code\owner\node\eggSys\node_modules\_egg-core@5.3.1@egg-core\lib\loader\mixin\controller.js:87:20)
    at Object.callFn (D:\work\code\owner\node\eggSys\node_modules\_@eggjs_router@2.0.1@@eggjs\router\lib\utils.js:12:21)
    at wrappedController (D:\work\code\owner\node\eggSys\node_modules\_@eggjs_router@2.0.1@@eggjs\router\lib\egg_router.js:322:18)
    at dispatch (D:\work\code\owner\node\eggSys\node_modules\_koa-compose@3.2.1@koa-compose\index.js:44:32)
    at next (D:\work\code\owner\node\eggSys\node_modules\_koa-compose@3.2.1@koa-compose\index.js:45:18)
    at D:\work\code\owner\node\eggSys\node_modules\_@eggjs_router@2.0.1@@eggjs\router\lib\router.js:186:18

pid: 19036
hostname: LAILINXIANG-L14

2023-09-12 14:14:39,429 ERROR 11308 [-/127.0.0.1/-/19ms POST /sql] nodejs.ER_ROW_IS_REFERENCED_2Error: ER_ROW_IS_REFERENCED_2: Cannot delete or update a parent row: a foreign key constraint fails (`atguigudb`.`employees`, CONSTRAINT `emp_dept_fk` FOREIGN KEY (`department_id`) REFERENCES `departments` (`department_id`))
    at Query.Sequence._packetToError (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\sequences\Sequence.js:47:14)
    at Query.ErrorPacket (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\sequences\Query.js:79:18)
    at Protocol._parsePacket (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\Protocol.js:291:23)
    at Parser._parsePacket (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\Parser.js:433:10)
    at Parser.write (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\Parser.js:43:10)
    at Protocol.write (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\Protocol.js:38:16)
    at Socket.<anonymous> (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\Connection.js:88:28)
    at Socket.<anonymous> (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\Connection.js:526:10)
    at Socket.emit (events.js:400:28)
    at addChunk (internal/streams/readable.js:293:12)
    --------------------
    at Pool.query (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\Pool.js:199:23)
    at internal/util.js:340:30
    at new Promise (<anonymous>)
    at Pool.query (internal/util.js:339:12)
    at RDSClient._query (D:\work\code\owner\node\eggSys\node_modules\_ali-rds@5.1.2@ali-rds\lib\client.js:33:33)
    at RDSClient.query (D:\work\code\owner\node\eggSys\node_modules\_ali-rds@5.1.2@ali-rds\lib\operator.js:62:31)
    at RDSClient.delete (D:\work\code\owner\node\eggSys\node_modules\_ali-rds@5.1.2@ali-rds\lib\operator.js:305:27)
    at HomeService.operateSql (D:\work\code\owner\node\eggSys\app\service\home.js:29:47)
    at HomeController.sqlApi (D:\work\code\owner\node\eggSys\app\controller\home.js:51:41)
    at Object.callFn (D:\work\code\owner\node\eggSys\node_modules\_egg-core@5.3.1@egg-core\lib\utils\index.js:44:21)
    sql: DELETE FROM `departments` WHERE `department_id` = '20'
code: "ER_ROW_IS_REFERENCED_2"
errno: 1451
sqlMessage: "Cannot delete or update a parent row: a foreign key constraint fails (`atguigudb`.`employees`, CONSTRAINT `emp_dept_fk` FOREIGN KEY (`department_id`) REFERENCES `departments` (`department_id`))"
sqlState: "23000"
index: 0
sql: "DELETE FROM `departments` WHERE `department_id` = '20'"
name: "ER_ROW_IS_REFERENCED_2Error"
pid: 11308
hostname: LAILINXIANG-L14

2023-09-12 14:15:16,306 ERROR 4320 [-/127.0.0.1/-/9ms POST /sql] nodejs.ER_ROW_IS_REFERENCED_2Error: ER_ROW_IS_REFERENCED_2: Cannot delete or update a parent row: a foreign key constraint fails (`atguigudb`.`employees`, CONSTRAINT `emp_dept_fk` FOREIGN KEY (`department_id`) REFERENCES `departments` (`department_id`))
    at Query.Sequence._packetToError (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\sequences\Sequence.js:47:14)
    at Query.ErrorPacket (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\sequences\Query.js:79:18)
    at Protocol._parsePacket (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\Protocol.js:291:23)
    at Parser._parsePacket (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\Parser.js:433:10)
    at Parser.write (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\Parser.js:43:10)
    at Protocol.write (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\Protocol.js:38:16)
    at Socket.<anonymous> (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\Connection.js:88:28)
    at Socket.<anonymous> (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\Connection.js:526:10)
    at Socket.emit (events.js:400:28)
    at addChunk (internal/streams/readable.js:293:12)
    --------------------
    at Pool.query (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\Pool.js:199:23)
    at internal/util.js:340:30
    at new Promise (<anonymous>)
    at Pool.query (internal/util.js:339:12)
    at RDSClient._query (D:\work\code\owner\node\eggSys\node_modules\_ali-rds@5.1.2@ali-rds\lib\client.js:33:33)
    at RDSClient.query (D:\work\code\owner\node\eggSys\node_modules\_ali-rds@5.1.2@ali-rds\lib\operator.js:62:31)
    at RDSClient.delete (D:\work\code\owner\node\eggSys\node_modules\_ali-rds@5.1.2@ali-rds\lib\operator.js:305:27)
    at HomeService.operateSql (D:\work\code\owner\node\eggSys\app\service\home.js:29:47)
    at HomeController.sqlApi (D:\work\code\owner\node\eggSys\app\controller\home.js:51:41)
    at Object.callFn (D:\work\code\owner\node\eggSys\node_modules\_egg-core@5.3.1@egg-core\lib\utils\index.js:44:21)
    sql: DELETE FROM `departments` WHERE `department_id` = 20
code: "ER_ROW_IS_REFERENCED_2"
errno: 1451
sqlMessage: "Cannot delete or update a parent row: a foreign key constraint fails (`atguigudb`.`employees`, CONSTRAINT `emp_dept_fk` FOREIGN KEY (`department_id`) REFERENCES `departments` (`department_id`))"
sqlState: "23000"
index: 0
sql: "DELETE FROM `departments` WHERE `department_id` = 20"
name: "ER_ROW_IS_REFERENCED_2Error"
pid: 4320
hostname: LAILINXIANG-L14

2023-09-12 14:29:31,097 ERROR 8436 [-/127.0.0.1/-/10ms POST /sql] nodejs.ER_ROW_IS_REFERENCED_2Error: ER_ROW_IS_REFERENCED_2: Cannot delete or update a parent row: a foreign key constraint fails (`atguigudb`.`departments`, CONSTRAINT `dept_mgr_fk` FOREIGN KEY (`manager_id`) REFERENCES `employees` (`employee_id`))
    at Query.Sequence._packetToError (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\sequences\Sequence.js:47:14)
    at Query.ErrorPacket (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\sequences\Query.js:79:18)
    at Protocol._parsePacket (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\Protocol.js:291:23)
    at Parser._parsePacket (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\Parser.js:433:10)
    at Parser.write (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\Parser.js:43:10)
    at Protocol.write (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\Protocol.js:38:16)
    at Socket.<anonymous> (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\Connection.js:88:28)
    at Socket.<anonymous> (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\Connection.js:526:10)
    at Socket.emit (events.js:400:28)
    at addChunk (internal/streams/readable.js:293:12)
    --------------------
    at Pool.query (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\Pool.js:199:23)
    at internal/util.js:340:30
    at new Promise (<anonymous>)
    at Pool.query (internal/util.js:339:12)
    at RDSClient._query (D:\work\code\owner\node\eggSys\node_modules\_ali-rds@5.1.2@ali-rds\lib\client.js:33:33)
    at RDSClient.query (D:\work\code\owner\node\eggSys\node_modules\_ali-rds@5.1.2@ali-rds\lib\operator.js:62:31)
    at RDSClient.delete (D:\work\code\owner\node\eggSys\node_modules\_ali-rds@5.1.2@ali-rds\lib\operator.js:305:27)
    at HomeService.operateSql (D:\work\code\owner\node\eggSys\app\service\home.js:32:47)
    at HomeController.sqlApi (D:\work\code\owner\node\eggSys\app\controller\home.js:51:41)
    at Object.callFn (D:\work\code\owner\node\eggSys\node_modules\_egg-core@5.3.1@egg-core\lib\utils\index.js:44:21)
    sql: DELETE FROM `employees` WHERE `department_id` = 20
code: "ER_ROW_IS_REFERENCED_2"
errno: 1451
sqlMessage: "Cannot delete or update a parent row: a foreign key constraint fails (`atguigudb`.`departments`, CONSTRAINT `dept_mgr_fk` FOREIGN KEY (`manager_id`) REFERENCES `employees` (`employee_id`))"
sqlState: "23000"
index: 0
sql: "DELETE FROM `employees` WHERE `department_id` = 20"
name: "ER_ROW_IS_REFERENCED_2Error"
pid: 8436
hostname: LAILINXIANG-L14

2023-09-12 14:31:18,332 ERROR 19240 [-/127.0.0.1/-/9ms POST /sql] nodejs.ER_ROW_IS_REFERENCED_2Error: ER_ROW_IS_REFERENCED_2: Cannot delete or update a parent row: a foreign key constraint fails (`atguigudb`.`departments`, CONSTRAINT `dept_mgr_fk` FOREIGN KEY (`manager_id`) REFERENCES `employees` (`employee_id`))
    at Query.Sequence._packetToError (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\sequences\Sequence.js:47:14)
    at Query.ErrorPacket (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\sequences\Query.js:79:18)
    at Protocol._parsePacket (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\Protocol.js:291:23)
    at Parser._parsePacket (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\Parser.js:433:10)
    at Parser.write (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\Parser.js:43:10)
    at Protocol.write (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\protocol\Protocol.js:38:16)
    at Socket.<anonymous> (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\Connection.js:88:28)
    at Socket.<anonymous> (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\Connection.js:526:10)
    at Socket.emit (events.js:400:28)
    at addChunk (internal/streams/readable.js:293:12)
    --------------------
    at Pool.query (D:\work\code\owner\node\eggSys\node_modules\_mysql@2.18.1@mysql\lib\Pool.js:199:23)
    at internal/util.js:340:30
    at new Promise (<anonymous>)
    at Pool.query (internal/util.js:339:12)
    at RDSClient._query (D:\work\code\owner\node\eggSys\node_modules\_ali-rds@5.1.2@ali-rds\lib\client.js:33:33)
    at RDSClient.query (D:\work\code\owner\node\eggSys\node_modules\_ali-rds@5.1.2@ali-rds\lib\operator.js:62:31)
    at RDSClient.delete (D:\work\code\owner\node\eggSys\node_modules\_ali-rds@5.1.2@ali-rds\lib\operator.js:305:27)
    at HomeService.operateSql (D:\work\code\owner\node\eggSys\app\service\home.js:32:47)
    at HomeController.sqlApi (D:\work\code\owner\node\eggSys\app\controller\home.js:51:41)
    at Object.callFn (D:\work\code\owner\node\eggSys\node_modules\_egg-core@5.3.1@egg-core\lib\utils\index.js:44:21)
    sql: DELETE FROM `employees` WHERE `last_name` = 'Hartstein'
code: "ER_ROW_IS_REFERENCED_2"
errno: 1451
sqlMessage: "Cannot delete or update a parent row: a foreign key constraint fails (`atguigudb`.`departments`, CONSTRAINT `dept_mgr_fk` FOREIGN KEY (`manager_id`) REFERENCES `employees` (`employee_id`))"
sqlState: "23000"
index: 0
sql: "DELETE FROM `employees` WHERE `last_name` = 'Hartstein'"
name: "ER_ROW_IS_REFERENCED_2Error"
pid: 19240
hostname: LAILINXIANG-L14

2023-10-20 15:13:29,482 ERROR 6424 [-/127.0.0.1/-/3ms POST /sql] nodejs.TypeError: this.app.mysql.query is not a function
    at HomeService.operateSql (D:\work\code\owner\node\eggSys\app\service\home.js:34:39)
    at HomeController.sqlApi (D:\work\code\owner\node\eggSys\app\controller\home.js:47:41)
    at Object.callFn (D:\work\code\owner\node\eggSys\node_modules\_egg-core@5.3.1@egg-core\lib\utils\index.js:44:21)
    at Object.classControllerMiddleware (D:\work\code\owner\node\eggSys\node_modules\_egg-core@5.3.1@egg-core\lib\loader\mixin\controller.js:87:20)
    at Object.callFn (D:\work\code\owner\node\eggSys\node_modules\_@eggjs_router@2.0.1@@eggjs\router\lib\utils.js:12:21)
    at wrappedController (D:\work\code\owner\node\eggSys\node_modules\_@eggjs_router@2.0.1@@eggjs\router\lib\egg_router.js:322:18)
    at dispatch (D:\work\code\owner\node\eggSys\node_modules\_koa-compose@3.2.1@koa-compose\index.js:44:32)
    at next (D:\work\code\owner\node\eggSys\node_modules\_koa-compose@3.2.1@koa-compose\index.js:45:18)
    at D:\work\code\owner\node\eggSys\node_modules\_@eggjs_router@2.0.1@@eggjs\router\lib\router.js:186:18
    at dispatch (D:\work\code\owner\node\eggSys\node_modules\_koa-compose@3.2.1@koa-compose\index.js:44:32)

pid: 6424
hostname: LAILINXIANG-L14

